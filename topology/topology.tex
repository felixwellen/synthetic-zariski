
This collection of topological properties is not meant to be complete.
Reduced schemes are defined in the work in progress draft \cite{etale-draft}.

\subsection{Infinitesimal Neighborhoods}

There is an operation, which extends a closed subtype to some infinitesimal extend.

\begin{definition}%
  \label{affine-n-th-inf-neighborhood}
  Let $X=\Spec A$ be affine and $C=\Spec A/I$
  a closed subtype given by an finitely generated ideal $I\subseteq A$.
  Then the \notion{$n$-th infinitesimal neighborhood} of $C$ in $X$ is the closed subtype
  \[
    C^{n+1}\colonequiv \Spec A/(I^{n+1}) \subseteq \Spec A\rlap{.}
  \]
\end{definition}

\rednote{TODO:
* emphasize pointwise perspective more (operation on closed propositions)
}

Explicitly, $I^k$, with $I=(f_1,\dots,f_m)$, is the ideal
\[
  I^k\colonequiv
  \left\{
    \sum_{i=1}^m\alpha_i x_{i,1}\cdot\cdots\cdot x_{i,k}
    \mid x_{i,j}:I, \alpha_i:A
  \right\}\rlap{.}
\]
So, by calculation, $(f_1,\dots,f_m)^k$
is generated by all $k$-fold products of the generators of the $f_i$.

There is an easy way describing the union of all the $k$-th neighborhoods
of a closed subtype, using double negation:

\begin{lemma}[using \axiomref{sqc}, \axiomref{loc}, \axiomref{Z-choice}]%
  \label{affine-n-th-inf-neighborhood-formal}
  Let $X=\Spec A$ be affine and $C \subseteq \Spec A$ a closed subtype.
  Then we have
  \[ \bigcup_{n : \N} C^n = \neg\neg C \rlap{.} \]
  The subtype $\neg\neg C$ is also called the \notion{formal neighborhood} of $C$.
\end{lemma}

\begin{proof}
  Let $C$ be given as $\Spec A/(f_1,\dots,f_l)$.
  Then, for any $x:X$
  \begin{align*}
    \neg\neg C(x) &= \neg \neg (x\in C) \\
                  &= \neg\neg (\forall i. f_i(x)=0) \\
                  &= \forall_i \quad\neg\neg f_i(x)=0 \\
    &= \forall_i \quad f_i(x)\text{ is nilpotent}
  \end{align*}
  -- and $C^n(x)$ implies $\forall_i \quad f^n_i(x)=0$.
  And if $\forall_i \quad f^n_i(x)=0$, then $C^{nl}(x)$.
\end{proof}


\subsection{Connectedness}
The following is in conflict with the usual use of the word ``connected'' in homotopy type theory.

\begin{definition}%
  \label{connected}
  A pointed type $X$ is called \notion{connected},
  if the following equivalent statements hold:
  \begin{enumerate}[(i)]
  \item Any function $X\to \Bool$ is constant.
  \item Any detachable subset is $X$ or $\emptyset$.
 \end{enumerate}
\end{definition}

\begin{proposition}[using \axiomref{sqc}, \axiomref{loc}]%
  \label{A1-connected}
  The set $\A^1$ is connected, that is,
  every function $f : \A^1 \to \Bool$ is constant.
\end{proposition}

\begin{proof}
  We embed $\Bool$ into $R$ as the subset $\{0, 1\} \subseteq R$.
  (We have $0 \neq 1$ in $R$ by (\axiomref{loc}).)
  Then we have a function $\widetilde{f} : \A^1 \to R$
  and we can assume $\widetilde{f}(0) = 0$.
  Note that $\widetilde{f}$ is an idempotent element of the algebra $R^{\A^1}$,
  since all its values are idempotent elements of $R$.
  By (\axiomref{sqc}),
  $\widetilde{f}$ is given by an idempotent polynomial $p \in R[X]$
  with $p(0) = 0$.
  But from this follows $p = 0$:
  we can factorize $p = X q$
  and then calculate $p = p^n = X^n q^n$
  to see that all coefficients of $p$ are zero.
\end{proof}

A connected scheme, that is covered by its point and everything except the point,
is already trivial.

\begin{corollary}%
  \label{connected-to-contractible}
  Let $X$ be a connected scheme and 
  \[\prod_{x:X}x=* \vee x\neq *.\]
  Then $X$ is contractible.
\end{corollary}

\begin{proof}
  Assume $\prod_{x:X}x=* \vee x\neq *$.
  Since for any proposition $P$, $P + \neg P$ is a proposition,
  we have $\prod_{x:X}x=* + x\neq *$ and there is a map to $\Bool$ from any binary copdoduct.
  So we have a map $X\to \Bool$
  which decides if a general $x:X$ is the point $*$ or not.
  By connectedness of $X$, this map is constant, but we know $*=*$,
  so $x=*$ for all $x$.
\end{proof}

\begin{corollary}[using \axiomref{sqc}, \axiomref{loc}]%
  \label{R-not-discrete}
  $\neg(\prod_{x:\A^1}x=0 \vee x\neq 0)$
\end{corollary}

\begin{proof}
  By \cref{connected-to-contractible} and by the connectedness of $\A^1$ (\cref{A1-connected}),
  we can show from $\prod_{x:\A^1}x=0 \vee x\neq 0$ that $\A^1$ is contractible.
  This contradicts $1\neq 0$.
\end{proof}

%duplicate?
\begin{example}
  The ring $R$ is a local ring, so we have
  $\Pi_{x \in R} \propTrunc{\inv(x) \lor \inv(1 - x)}$,
  but we can prove that
  the statement without the propositional truncation is false:
  \[ \lnot \Pi_{x \in R} (\inv(x) \amalg \inv(1 - x)) \rlap{.} \]
  Namely,
  a witness of $\Pi_{x \in R} (\inv(x) \amalg \inv(1 - x))$
  is equivalently a function $f : R \to \Bool$
  with the property that
  \[ \text{if $f(x)$ then $\inv(x)$ else $\inv(1 - x)$} \rlap{.} \]
  But by $\cref{A1-connected}$,
  the function $f$ must be constant,
  contradicting the fact that
  $\lnot\inv(x)$ for $x = 0$ and $\lnot\inv(1 - x)$ for $x = 1$.

  In particular,
  not every type family $B : \A^1 \to \mU$ with $\Pi_{x : \A^1} \propTrunc{B(x)}$
  merely admits a choice function $\Pi_{x : \A^1} B(x)$.
\end{example}

\subsection{Compactness properties}

\Cref{boundedness} can be read as a compactness property
for countable disjoint open coverings of affine schemes,
since functions $f : \Spec A \to \N$
correspond to decompositions $\Spec A = \sum_{n : \N} U_n$,
and the subsets $U_n \subseteq X$ are automatically open
because they are detachable.

The following example shows that we can not expect all affine schemes
to be compact with respect to arbitrary set-indexed open coverings.

\begin{example}
  For $A$ a finitely presented $R$-algebra,
  consider the open cover ${(U_i)}_{i \in I}$,
  where the index set is $I = \Spec A$
  and for each $i$ we set $U_i = \Spec A = D(1)$.
  This indeed covers all points of $\Spec A$,
  since for every $x \in \Spec A$ we clearly have $x \in U_x$.
  To give a finite subcover of this cover, however,
  means to give a natural number $n$ and a function $\Fin n \to \Spec A$
  with the property that $\Spec A$ is empty if $n = 0$.
  In essence, it means to decide whether $\Spec A$ is inhabited or not.
  We claim that this is not possible for all finitely presented $R$-algebras:
  \[ \lnot (\Pi_{A : f.p. R\text{-Alg}} \propTrunc{\Spec A \amalg \lnot \Spec A} )
     \rlap{.} \]
  Indeed, for $A = R/(x)$,
  the proposition $\propTrunc{\Spec A \amalg \lnot \Spec A}$
  means $x = 0 \lor x \neq 0$,
  and we saw in~\ref{MISSING} that this is not true for all $x \in R$.
\end{example}

There is, however, a notion of compactness, which seems to correspond to completeness and therefore also leads to a notion of properness,
which is treated in \cite{proper-draft}.


\subsection{Dense subtypes}

Algebraic preparation:

\begin{lemma}%
  \label{nilregular-non-zero-polynomial}
  If $P:R[X]$ and we have $P\neq 0$, or equivalently,
  that merely some coefficient of $P$ is non-zero,
  then $P$ is nilregular.
\end{lemma}

\begin{proof}
  If $P$ is non-zero, its content $c(P)$ is top.
  For any $Q:R[X]$ with $P\cdot Q$ nilpotent,
  by \cite{lombardi-quitte}[Theorem III.2.1] we also have $c(P\cdot Q)=c(P)\wedge c(Q)=c(Q)$ is bottom.
  So $Q$ is nilpotent.
\end{proof}

In a lattice,
an element $a$ can be called dense
if $a \wedge b = \bot$ implies $b = \bot$.
We apply this definition to the lattice of open subtypes of a type $X$,
but generalize it to allow for non-open dense subtypes too.

\begin{definition}
  A subtype $A\subseteq X$ is called \notion{dense},
  if for all open subtypes $V\subseteq X$ such that $V\cap A=\emptyset$, we have $V=\emptyset$.
\end{definition}

\begin{lemma}%
  \label{basic-dense-operations}
  Let $X$ be a type.
  \begin{enumerate}[(a)]
  \item If $D\subseteq X$ is dense, then $X\neq \emptyset$ implies $D\neq \emptyset$.
  \item Let $D \subseteq X$ be dense and open and let $E \subseteq X$ be dense,
    then $D\cap E$ is dense.
  \item Let $D\subseteq X$ be dense and $E\subseteq X$ any subtype, then $D\cup E$ is dense.
  \end{enumerate}
\end{lemma}

\begin{proof}
  \begin{enumerate}[(a)]
  \item Assume $D\subseteq X$ is dense and empty.
    Then $X\cap D=\emptyset$ and by denseness of $D$,
    the open subtype $X \subseteq X$ is empty,
    which contradicts $X\neq \emptyset$.
  \item Let $V\subseteq X$ be open with $V\cap D\cap E=\emptyset$.
    Since $V \cap D$ is open and $E$ is dense,
    we get $V \cap D = \emptyset$,
    and by denseness of $D$, we get $V=\emptyset$.
  \item Let $V\subseteq X$ be open with
    \[
      \emptyset=V\cap (D\cup E)=(V\cap D) \cup (V\cap E)\rlap{.}
    \]
    This implies $V\cap D=\emptyset$,
    so $V=\emptyset$.
  \end{enumerate}
\end{proof}

Being dense is double negation stable ---
which has the practical implication,
that we can ``open'' double-negated statements when showing denseness.

\begin{proposition}%
  \label{dense-double-negation-stable}
  Being dense is $\neg\neg$-stable:
  if a subtype $D \subseteq X$ is not not dense, then it is dense.
\end{proposition}

\begin{proof}
  We use general facts about modalities.
  $V=\emptyset$ is a pointwise negated statement and therefore $\neg\neg$-stable.
  Since the proposition that $D$ is dense is a $\prod$-type with values in $V=\emptyset$,
  it is also $\neg\neg$-stable.
\end{proof}

\begin{lemma}[using \axiomref{sqc}, \axiomref{loc}, \axiomref{Z-choice}]%
  \label{restrict-dense-to-open}
  Let $X$ be a type,
  let $U \subseteq X$ be an open subtype
  and let $D \subseteq X$ be dense.
  Then $U \cap D$ is a dense subtype of $U$.
\end{lemma}

\begin{proof}
  Let $V\subseteq U$ be open with $V \cap (U\cap D)=\emptyset$.
  Using \cref{qc-open-sigma-closed}, $V\subseteq X$ is open
  and $V\cap D = V\cap (U\cap D)=\emptyset$.
  So $V=\emptyset$ since $D$ is dense in $X$.
\end{proof}

Being dense is a local property in the following sense:

\begin{lemma}[using \axiomref{sqc}, \axiomref{loc}, \axiomref{Z-choice}]%
  \label{dense-local}
  Let $X$ be a type
  and $U_i\subseteq X$ be open subtypes for $i:I$ such that $\bigcup_{i:I}U_i=X$.
  Then $A\subseteq X$ is dense, if and only if,
  $A\cap U_i$ is dense in $U_i$ for every $i$.
\end{lemma}

\begin{proof}
  Let all $A\cap U_i$ be dense.
  To show that $A$ is dense, let $V\subseteq X$ be open and $V\cap A= \emptyset$.
  Then $\emptyset=V\cap A=\bigcup_{i:I}(V\cap U_i)\cap (A\cap U_i)$,
  so $(V\cap U_i)\cap (A\cap U_i) = \emptyset$ for all $i:I$.
  But $V\cap U_i$ is open in $U_i$, so by assumption, $V\cap U_i=\emptyset$ for all $i:I$.
  So $V=\bigcup_{i:I}V\cap U_i=\emptyset$ and $A$ is dense.

  The other direction follows from \cref{restrict-dense-to-open}.
\end{proof}

We will now characterize dense open subsets of affine schemes.

\begin{definition}
  Let $A$ be a commutative ring.
  \begin{enumerate}[(a)]
  \item An element $r:A$ is \notion{nilregular}, if for all $x:A$, such that $rx$ is nilpotent, $x$ is nilpotent.
  \item A list of elements $r_1,\dots,r_n:A$ is \notion{jointly nilregular}, if for all $x:A$,
    such that all $r_ix$ are nilpotent, $x$ is nilpotent.
  \end{enumerate}
\end{definition}

\begin{proposition}
  Any regular (\cref{regular-element}) element $r:A$ is nilregular.
\end{proposition}

\begin{lemma}[using \axiomref{sqc}, \axiomref{loc}, \axiomref{Z-choice}]%
  \label{affine-open-dense-nilregular}
  Let $X=\Spec A$ be affine and $U\subseteq X$ open.
  Then $U$ is dense, if and only if,
  $U=D(r_1,\dots,r_n)$, with jointly nilregular $r_1,\dots,r_n:A$.
\end{lemma}

\begin{proof}
  Let $U\subseteq X$ be dense and open.
  By \cref{qc-open-affine-open}, there are $r_1,\dots,r_n:A$ such that $U=D(r_1,\dots,r_n)$.
  Let $x:A$ such that all $r_ix$ are nilpotent.
  By \cref{standard-open-empty}, this implies $D(r_ix)=\emptyset$ for all $i$.
  Since $D(x)\cap D(r_1,\dots,r_n)=D(r_1x)\cup\dots\cup D(r_nx)=\emptyset$,
  this implies $D(x)=\emptyset$.
  Therefore $x$ is nilpotent and the $r_i$ are jointly nilregular.

  Now let $U=D(r_1,\dots,r_n)$ with jointly nilregular $r_1,\dots,r_n:A$.
  Without loss of generality, let $V=D(f)$ and $D(f)\cap U=\emptyset$.
  Then $D(r_1f)\cup \dots \cup D(r_nf)=\emptyset$, so $D(r_if)=\emptyset$ for all $i$.
  This means $r_if$ is nilpotent and therefore, $f$ is nilpotent and $D(f)=\emptyset$.
\end{proof}

\begin{corollary}[using \axiomref{sqc}, \axiomref{loc}, \axiomref{Z-choice}]%
  The only dense open subset of $1=\Spec R$ is $1$.
\end{corollary}

\begin{proof}
  Let $U\subseteq 1$ be dense and open.
  By \cref{affine-open-dense-nilregular},
  there are jointly nilregular $r_1,\dots,r_n:R$,
  such that $U=D(r_1,\dots,r_n)$.
  But jointly nilregular entails,
  that one of the $r_i$ is invertible, so $U=1$.
\end{proof}

\begin{theorem}[using \axiomref{sqc}, \axiomref{loc}, \axiomref{Z-choice}]%
  \label{dense-is-jointly-nilregular}
  Let $X$ be a scheme.
  An open subtype $U\subseteq X$ is dense,
  if and only if, there is an open affine cover $U_i=\Spec A_i$
  and $U\cap U_i=D(r_{i1},\dots,r_{in_i})$ with jointly nilregular $r_{i1},\dots,r_{in_i}:A_i$ for all $i$.
\end{theorem}

\begin{proof}
  By \cref{affine-open-dense-nilregular} and \cref{dense-local}.
\end{proof}

Classicly, one possible definition of a dense subset
is that the closure is the whole space.
We will see an approximation to that in \cref{clopen-dense-is-all}.
There are lots of examples of non-trivial dense subsets.
For example, the next section will contain a proof,
that any non-empty open subset of $\A^1$ is dense.


We can extend the operation from \cref{affine-n-th-inf-neighborhood}
to schemes:

\begin{definition}[using \axiomref{sqc}, \axiomref{loc}, \axiomref{Z-choice}]%
  Let $X$ be a scheme and $C\subseteq X$ a closed subscheme.
  Then $C^n$ is the closed subscheme of $X$,
  defined locally as in \cref{affine-n-th-inf-neighborhood}.
\end{definition}

\begin{proof}
  We need the axioms to locally get ideals that generate the closed subscheme.
  We need to show that the construction can be done locally,
  but this is the case, since for any open affine $U$,
  $(C\cap U)^n\subseteq \neg\neg (C\cap U)\subseteq U$ by \cref{MISSING}.
\end{proof}

\begin{lemma}[using \axiomref{sqc}, \axiomref{loc}, \axiomref{Z-choice}]%
  \label{dense-closed-n-th-neighborhood}
  Let $U\subseteq X$ be a dense open subtype of a scheme.
  For any closed subtype $V$ containing $U$,
  there merely is an $n:\N$, such that $V^n=X$.
\end{lemma}

\begin{proof}
  It is enough to do the construction for an open affine $W=\Spec A$,
  where $V\cap U=\Spec A/(f_1,\dots,f_n)$ and
  $U=D(g_1,\dots,g_l)$.
  By \cref{dense-is-jointly-nilregular} we can assume the $g_1,\dots,g_l$
  are jointly nilregular.
  For any $f_i$ we know $f_i\cdot g_j$ is nilpotent, since
  \[ \neg D(f_ig_j)=\neg\{x:W\mid f_ig_i(x)\text{ invertible}\} =\emptyset\rlap{,}\]
  since if $f_ig_j(x)$ is invertible, then $g_j(x)$ is invertible, but then, we are in
  $U$ and $f_i(x)$ has to be zero, which contradicts its invertibility.

  By the joint nilregularity of the $g_j$, $f_i$ is nilpotent,
  so $f_i^n=0$ and $V^n=W$.
\end{proof}

In the situation of a clopen subset, we get the classical equality:

\begin{lemma}[using \axiomref{sqc}, \axiomref{loc}, \axiomref{Z-choice}]%
  \label{clopen-dense-is-all}
  Let $U\subseteq X$ be a dense open and closed subtype of a scheme,
  then $U=X$
\end{lemma}

\begin{proof}
  By \cref{dense-closed-n-th-neighborhood},
  $U^n=X$.
  By \cref{affine-n-th-inf-neighborhood-formal}, we have
  \[
    X\subseteq U^n\subseteq \neg\neg U = U\rlap{.}
  \]
\end{proof}


\subsection{Closed dense subtypes}

This section is due to Hugo Moeneclaey.

\begin{lemma}
\label{closed-non-empty-iff-dense}
For any type $X$, a closed subtype $C : X \to \Prop$ is dense if and only if:
\[
\prod_{x:X} \neg\neg C(x)
\]
\end{lemma}

\begin{proof}
Assume $C$ a closed subtype of $X$. 
If $C$ is dense, as $\neg C$ is open and $\neg C \cap C = \emptyset$, we have that $\neg C = \emptyset$ which is precisely what we want.

Conversely assume that for all $x:X$ we have $\neg\neg C(x)$. Let $U$ be an open subtype of $X$ such that $U\cap C = \emptyset$. Then for any $x:X$ we have $\neg(C(x)\land U(x))$ as well as $\neg\neg C(x)$, so that we have $\neg U(x)$. So we have $U=\emptyset$ and $C$ is indeed dense.
\end{proof}

\begin{corollary}
The type of closed propositions $C$ such that $\neg\neg C$ classifies closed dense subtypes.
\end{corollary}

\begin{proposition}[using \axiomref{sqc}, \axiomref{loc}]
A closed subscheme $\Spec(A/I)$ of an affine scheme $\Spec(A)$ is dense if and only if $I$ is nilpotent.
\end{proposition}

\begin{proof}
Assume $\Spec(A/I)\subset \Spec(A)$ dense. For any $f:I$, we have $\Spec(A/I)\cap D(f)=\emptyset$ and $D(f)$ open so that $D(f)=\emptyset$ and $f$ is nilpotent.

Conversely, let $I$ be a finitely generated nilpotent ideal in $A$ generated by $f_1,\cdots,f_n$. Then for all $x:\Spec(A)$, we have $x\in\Spec(A/I)$ if and only if:
\[
f_1(x)=0\land\cdots\land f_n(x)=0
\]
But as $f_1,\cdots,f_n$ are nilpotent we have:
\[
\neg\neg (f_1(x)=0)\land\cdots\land \neg\neg(f_n(x)=0)
\]
so that:
\[
\neg\neg(x\in\Spec(A/I))
\]
and $\Spec(A/I)$ is dense by \cref{closed-non-empty-iff-dense}.
\end{proof}

\subsection{Irreducible and reducible types}
\rednote{This section has a contradiction: One can conclude that subtypes of irreducible types are irreducible (since sigma and propositions are). This problem was discovered by Fabian Endres.}

We start with the notion of reducible types and will then pass to the negation of this concept, to irreducible types.

\begin{definition}
  A type is called \notion{reducible}, if there are two disjoint, inhabited open subtypes.
\end{definition}

\begin{proposition}
  The scheme $\Spec R[X,Y]/(XY)$ is reducible.
\end{proposition}

\begin{proof}
  We take the subsets $D(X),D(Y)\subseteq \Spec R[X,Y]/(XY)$.
  Then
  \[ D(X)\cap D(Y)=\{\,(x,y)\mid xy=0\wedge x\neq 0\wedge y\neq 0\,\}=\emptyset\rlap{.} \]
  And $(1,0)\in D(X)$, $(0,1)\in D(Y)$.
\end{proof}

\begin{definition}%
  \label{irred}
  A type $X$ is called \notion{irreducible},
  if the following equivalent propositions hold:
  \begin{enumerate}[(i)]
  \item $X$ is not reducible.
  \item Any non-empty open $U\subseteq X$ is dense.
  \item For any open disjoint $U,V\subseteq X$ such that $U\neq\emptyset$, we have $V=\emptyset$.
  \end{enumerate}
\end{definition}

\begin{proposition}%
  \label{irred-double-negation-stable}
  Being irreducible is $\neg\neg$-stable.
\end{proposition}

\begin{proof}
  By the definition as not reducible,
  or by \cref{dense-double-negation-stable}.
\end{proof}

\begin{example}
  Every proposition is an irreducible type,
  since any two inhabited subtypes intersect.
\end{example}

\begin{proposition}[using \axiomref{sqc}, \axiomref{loc}, \axiomref{Z-choice}]%
  \label{A1-irreducible}
  $\A^1$ is irreducible.
\end{proposition}

\begin{proof}
  Let $U\subseteq \A^1$ with $U\neq \emptyset$.
  We have to show that $U$ is dense.
  Let $U=D(f_1,\dots,f_n)$.
  We merely have a bound for the degree of each of the $f_i:R[X]$,
  so we can concatenate all coefficients of the $f_i$ and, since $U\neq \emptyset$,
  we know that vector is not the zero-vector.
  So one of the $f_i$ is nilregular by \cref{nilregular-non-zero-polynomial}.
  In particular,
  the elements $f_1, \dots, f_n$ are jointly nilregular,
  so $U$ is dense by \cref{affine-open-dense-nilregular}.
\end{proof}

\begin{example}
  The scheme $\Spec R[X,Y]/(XY)$ is not irreducible.
\end{example}

\begin{remark}
  In a classical setting,
  reducibility and irreducibility are usually defined
  in terms of closed subsets instead of open subsets.
  However, this does not give the correct notion in our setting,
  as the example $\Spec R[X, Y]/(XY)$ shows:
  this scheme is not the union of the closed subsets $V(X)$ and $V(Y)$.
\end{remark}

We will now explore the relation of connectedness and irreducibility.
It is not the case, that any open dense subtype of a connected scheme is connected:

\begin{example}
  Let us first show,
  that $V(XY)\subseteq \A^2$ is connected.
  Let $f:V(XY)\to \Bool$ be a function and assume without loss of generality,
  that $f(0,0)=1$.
  Then the restriction of $D(f)$ to both, $V(X)$ or $V(Y)$ is dense.
  Since $f(x)=1$ is closed and holds for $x:D(f)$, $f(x)=1$ holds not not for all $x:V(XY)$,
  which is enough.
    
  The open subtype $D(X,Y)\subseteq V(XY)\subseteq \A^2$ is not connected.
  This is witnessed by the function
  \[
    \frac{X}{X+Y}
    \rlap{.}
  \]
\end{example}

\begin{proposition}[using no axioms]%
  \label{irreducible-implies-connected}
  Any irreducible pointed type is connected.
\end{proposition}

\begin{proof}
  Let $X$ be an irreducible pointed type
  and let a decomposition into detachable subsets $X = U \sqcup V$ be given.
  In particular, $U$ and $V$ are open subsets,
  and we can assume that the base point of $X$ lies in $U$.
  But then $U$ is dense since $X$ is irreducible,
  so we have $V = \emptyset$ and $U = X$.
\end{proof}

\begin{proposition}[using \axiomref{loc}, \axiomref{sqc}, \axiomref{Z-choice}]%
  \label{open-subtype-of-irred-is-irred}
  Let $X$ be an irreducible type
  and $U \subseteq X$ an open subtype.
  Then $U$ is also irreducible.
\end{proposition}

\begin{proof}
  Let $V, W \subseteq U$ be open subtypes with $V \cap W = \emptyset$.
  Assume that both $V$ and $W$ are nonempty,
  now we have to show a contradiction.
  By \cref{qc-open-sigma-closed},
  $V$ and $W$ are also open subsets of $X$,
  so we indeed get a contradiction
  from the fact that $X$ is irreducible.
\end{proof}

\begin{lemma}%
  \label{product-irreducible}
  Let $X$ be irreducible and $Y:X\to\Sch$ be a family of irreducible types.
  Then $(x:X) \times Y_x$ is irreducible.
\end{lemma}

The original version of the following proof is due to David Wärn.

\begin{proof}
  Let $U, V \subseteq X \times Y$
  be disjoint open subsets with $(a, b) \in U$, $(c, d) \in V$.
  Consider the subtypes
  \[ U_a \colonequiv \{\, x : X \mid (x, b) \in U \,\} \]
  and
  \[ V_c \colonequiv \{\, x : X \mid (x, d) \in V \,\} \rlap{.}\]
  These are two inhabited open subtypes of $X$,
  so they can not be disjoint.
  Since we want to show a contradiction,
  we can assume we have $e \in U_a \cap V_c$.
  But then
  \[ U_e \colonequiv \{\, y : Y_e \mid (e, y) \in U \,\} \]
  and
  \[ V_e \colonequiv \{\, y : Y_e \mid (e, y) \in V \,\} \]
  are open subtypes of $Y_e$ which are
  disjoint since $U$ and $V$ are disjoint,
  and inhabited by $b$ respectively $d$.
  This contradicts the irreducibility of $Y_e$.
\end{proof}

\begin{lemma}%
  \label{surjection-irreducible}
  Let $X$ be irreducible and $f:X\to Y$ be surjective,
  then $Y$ is irreducible.
\end{lemma}

\begin{proof}
  Using the definition with disjoint opens.
\end{proof}

We will see in \cref{projective-space-irreducible}, that the projective $n$-space $\bP^n$ is irreducible.

\subsection{Separated types and apartness}

\Cref{separated-inequality-apartness} was found and proven together with Marc Nieper-Wißkirchen and Ingo Blechschmidt.

\begin{definition}%
  A type $X$ is \notion{separated}, if for all $x,y:X$
  the type $x=y$ is a closed proposition,
  that is,
  the diagonal $X \to X\times X$ is the embedding of a closed subtype.
\end{definition}

\begin{definition}
  An \notion{apartness relation} on $X$ is a relation $\#:X\to X\to \Prop$, such that it is
  \begin{enumerate}[(i)]
  \item irreflexive: $\prod_{x:X}\neg(x \# x)$
  \item symmetric: $\prod_{x,y:X} x\# y \to y\# x$
  \item and cotransitive: $\prod_{x,y,z:X} x\# z \to x\# y \vee y\# z$.
  \end{enumerate}
\end{definition}

\begin{proposition}%
  \label{separated-inequality-apartness}
  If $X$ is a separated scheme, then inequality is an apartness relation.
\end{proposition}

\begin{proof}
  MISSING
\end{proof}

\begin{proposition}[using \axiomref{sqc}, \axiomref{loc}, \axiomref{Z-choice}]%
  Let $X$ be a separated scheme and $U,V$ be open affine in $X$.
  Then $U\cap V$ is affine.
\end{proposition}

\begin{proof}
  $U\cap V$ is equivalently the closed subtype $\{(x,y) : U\times V\mid x=y\}$.
  $U\times V$ is affine by \cref{affine-fiber-product} and a closed subtype of an affine scheme is affine by \cref{closed-subtype-affine}.
\end{proof}

\begin{example}[using \axiomref{sqc}, \axiomref{loc}]
  It is not the case that
  for every finitely presented $R$-algebra $A$
  and every $A$-module $M$
  the map $\eta_M$ is injective.
\end{example}

\begin{proof}
  Instead of giving a single counterexample,
  we construct a family of potential counterexamples,
  indexed by an element $f : R$.
  We set $A \colonequiv R/(f)$ and
  \[ M \colonequiv A^1 / \langle \{ 1 \mid f =_R 0 \} \rangle \rlap{.} \]
  Then we have $M \otimes x = 0$ for all $x : \Spec A$:
  an element $x : \Spec A$ is a witness that $f : R$ is invertible
  and if $f$ is invertible then $A = 0$, so $M = 0$, so $M \otimes x = 0$.
  This implies that
  if $\eta_M$ is injective
  then $M = 0$.
  But we have $M = 0$ if and only if
  $1_A \in \langle \{ 1 \mid f = 0 \} \rangle$
  if and only if
  $1_A$ a linear combination (of some length $n$)
  of elements of the set $\{ 1 \mid f = 0 \}$
  if and only if
  $f = 0$ ($n > 0$) or
  $1 =_A 0$, that is, $f$ is invertible ($n = 0$).
  In summary,
  if $\eta_M$ is injective for every choice of $f : R$,
  then every $f : R$ is zero or invertible.
  But this would be a contradiction to \cref{R-not-discrete}.
\end{proof}



Classically, there is no abelian category of coherent $\mathcal O_X$-modules over a general base.
Synthetically, the category of finitely presented modules over $R$ does not have all kernels,
since $R$ is not coherent, so module bundles with values in finitely presented modules are not abelian.

This section is about finding a suitable replacement category.
This section is joint work of Felix Cherubini, Dan Christensen and Thomas ThorbjÃ¸rnsen.
\rednote{This is work in progress and "coherent" is a bad, preliminary name for the modules introduced in this section.}

\begin{theorem}
  For an $R$-module $M$ let $M^\ast\colonequiv \Hom_{\Mod{R}}(M,R)$ be its dual.
  Then dualizing a finite co-presentation of $M$:
  \[ M \hookrightarrow R^n \to R^m \]
  yields a finite presentation:
  \[ R^m \to R^n \twoheadrightarrow M^\ast \]
  This induces an anti equivalence between finitely presented $R$-modules and finitely co-presented $R$-modules.
\end{theorem}

\begin{proof}
  \cite{etale-draft}
\end{proof}


\begin{lemma}
  \label{presentation-extension}
  Let $M,N$ be finitely presented and $f:M\to N$.
  Then there is an extension of this morphism to all presentations of $M$ and $N$:
  \begin{center}
    \begin{tikzcd}
      R^{m'}\ar[r]\ar[d,dotted,"\exists"] & R^m\ar[->>,r,"\pi_M"]\ar[d,dotted,"\exists"] & M\ar[d, "f"] \\ 
      R^{n'}\ar[r] & R^n\ar[->>,r,"\pi_N"] & N \\ 
    \end{tikzcd}
  \end{center}
  By dualizing, the analogous statement holds for finitely co-presented modules.
\end{lemma}

\begin{proof}
  By linear extension: For a standard basis vector $e_i:R^m$ we merely have $y:R^n$ such that $\pi_N(y)=f(\pi_M(e_i))$. By exactness, we also get $R^{m'}\to R^{n'}$ by linear extension.
\end{proof}

\begin{lemma}
  \label{kernel-fp-is-cok-fcp}       
  Let $f:M\to N$ be a map of finitely presented $R$-modules, then $\ker f$ is the cokernel of map between finitely copresented $R$-modules.
\end{lemma}

\begin{proof}
  By \Cref{presentation-extension} we can assume $f$ is induced by a square and we construct finitely copresented modules $A,B$ like described below:
  \begin{center}
  \begin{tikzcd}
    A\ar[r,"\pi_1"]\ar[d,"l\times\id"] & R^{m'}\ar[r,"t"]\ar[d,"l"] & R^{n'}\ar[d,"r"]   \\
    B\ar[r,"\pi_1"]\ar[d] & R^m\ar[r,"b"]\ar[d] & R^n\ar[d] \\
    K\ar[r] &M\ar[r,"f"] & N
    \end{tikzcd}
   \end{center}
   $A:=\{(z,y):R^{m'}\times R^{n'}\mid blz=ry\}$, $B:=\{(x,y):R^{m}\times R^{n'}\mid bx=ry\}$.
\end{proof}

Due to lack of a better name, we call the following modules coherent --
the idea is that they might yield an analogue of the algebro-geometric notion of coherent sheaf of modules

\begin{definition}
  Let $M$ be an $R$-module, then $M$ is called coherent one of the following equivalent statements hold:
  \begin{enumerate}[(i)]
  \item $M$ is merely the kernel of a homomorphism of finitely presented $R$-modules.
  \item $M$ is merely the cokernel of a homomorphism of finitely copresented $R$-modules.
  \item $M$ is the image of a map from a finitely co-presented $R$-module to a finitely presented $R$-module.
  \end{enumerate}
\end{definition}
We will show the equivalence of the last statement and the first two in ??.

\begin{remark}
  Any coherent $R$-module is wqc (\cite{draft}[Definition 7.1.5]).
\end{remark}

\begin{proof}
  By \cite{draft}[7.1.6, 7.1.13], the category of wqc $R$-modules is abelian and it contains finite free $R$-modules.
\end{proof}

\begin{lemma}
  Let $A$ and $B$ be finitely co-presented $R$-modules and $K$ be a coherent $R$-module.
  Then for any homorphism $f:A\to K$ there is a lift of the underlying sets:
  \begin{center}
    \begin{tikzcd}
       & C\ar[d,->>,"e"] \\
     A\ar[r,"f"]\ar[ru,dotted,"\exists"] & K 
    \end{tikzcd}
  \end{center}
  (where $e$ is the canonical map)
\end{lemma}

\begin{proof}
  Let $M$ be the kernel of $e$, then $M$ is wqc.
  By \cite{draft}[Theorem 7.3.6] we have $H^1(A,M)=0$, since $A$, like any finitely co-presented $R$-module, is an affine scheme.

  By definition, we have $H^1(A,M)=||A\to K(M,1)||_0$ and therefore that $A\to K(M,1)$ is connected.
  For $x:K$ let $E_x$ denote the fiber of $e$ over $x$, then $E_x$ is a $M$-torsor or in other words an element of $K(M,1)$.
  So $E\circ f:A\to K(M,1)$ and we have $|| E\circ f = (\_\mapsto M) ||$ by the connectedness noted above.
  This means that the dependent type $E\circ f$ merely has a section, since $(\_\mapsto M)$ has a section.
  This proves existence of the dotted map.
\end{proof}

\begin{theorem}
  \rednote{TODO} The category of coherent modules is abelian.
\end{theorem}

\begin{remark}
  \label{hom-closure}
  \rednote{needs closure under taking kernels and cokernels} For coherent $R$-modules $M,N$, the $R$-module $\Hom_{\Mod{R}}(M,N)$ is coherent.
\end{remark}

\begin{proof}
  In \cite{lombardi-quitte}[Chapter IV, 4.12], ``coherent'' means something else, but their proof can still be applied twice to show the statement of the remark as follows.
  
  First we use their proof to show that for finitely presented $R$-modules $M,N$ the $R$-module $\Hom_{\Mod{R}}(M,N)$ is coherent. Morphisms $f:M\to N$ are presented by squares:
  \begin{center}
  \begin{tikzcd}
        R^m \ar[r]\ar[d,"\varphi"] & R^{m'}\ar[d,"\psi"] \\
        R^n\ar[r] & R^{n'}
\end{tikzcd}
\end{center}
  So we have a finite free module of pairs of morphisms $(\varphi,\psi)$ and a submodule of pairs such that the square above commutes.
  This submodule $S$ is the kernel of a linear map and therefore coherent.
  We have a surjection $\pi:S\to \Hom_{\Mod{R}}(M,N)$, so $\Hom_{\Mod{R}}(M,N)$ is coherent,
  if $\pi$ is a cokernel of a map of coherent modules.
  This is the case, since there is a surjection onto $\ker{\pi}$ from the finite free $R$-module of linear maps which splitting the square:
  \begin{center}
  \begin{tikzcd}
        R^m \ar[r]\ar[d,"\varphi"] & R^{m'}\ar[d,"\psi"]\ar[ld,"s"] \\
        R^n\ar[r] & R^{n'}
\end{tikzcd}
\end{center}
  Then we can reuse the same argument to show the statement of the remark.
\end{proof}

\paragraph{Questions:}
\begin{enumerate}
\item Is dualization an antiequivalence of coherent modules?
\item Are coherent modules closed under extension?
\item Are coherent modules closed under $\Hom$?
\item Are coherent modules closed under $\_\otimes\_$?
\item \label{coherent-local} Is a locally coherent $R$-module coherent?
\item Are projective/proper/finite-scheme products of coherent modules coherent?
\item Are the cohomology groups of coherent module bundles on projective schemes coherent?
\end{enumerate}

\paragraph{Answers:}
\begin{enumerate}
\item \begin{enumerate}[(i)]
\item Partial answer: At the very least, dualization is a functor on coherent modules.
We get that from \cref{hom-closure}, or independently with the following argument:
Any coherent $M$ can be written as a cokernel of finitely copresented modules:
\[ A \to B \to M \to 0 \]
By the properties of cokernels, the dual is exact:
\[ 0\to M^\vee \to B^\vee \to A^\vee \]
with $B^\vee$ and $A^\vee$ finitely presented. So $M^\vee$ is coherent.
\item For abstract reasons, cokernels dualize to kernels.
\end{enumerate}
\item None so far
\item Yes, \cref{hom-closure}.
\item It could be possible to just use the result for finitely presented modules, by extending the extension properties above to bilinear maps.
\item None so far
\item Partial answer:
\begin{enumerate}[(i)]
\item Let $X$ be a finite scheme, i.e. $X$ an affine scheme such that $R^X$ is a finitely presented $R$-module.
  For any coherent $R$-module $M$, $M^X$ is coherent: We can exponentiate the diagram witnessing coherence.
  Exponentiating is left exact and since $M$ is wqc and $X$ affine, it is also right exact.
\item Let $M:X\to \Mod{R}_{\mathrm{coh}}$ for a finite scheme $X$. Then $(x:X)\to M_x$ would be a coherent $R$-module, if we have \cref{coherent-local}: By local choice, we get a cover $D(f_1),\dots,D(f_n)$ of $X$, such that coherence of $M$ is witnessed by a diagram $M\hookrightarrow N \to L$ with $N,L$ finitely presented. By \cite{draft}[Theorem 7.2.3], $(x:D(f_i))\to N_x$ and $(x:D(f_i))\to L_x$ are finitely presented $R^{D(f_i)}$-modules and therefore finitely presented $R$-modules and the dependent product is a left exact functor.
\end{enumerate}
\item None so far. It seems a bit much to ask, but it would be really great for Serre-Duality, so it should be worth it to try to adapt e.g.\ \cite[19.1.3]{vakil}.
\end{enumerate}
